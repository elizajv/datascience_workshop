This contains codes for my Data Science Workshop capstone project:

```{r}
## Extract data from Reliefweb API

## Load jsonlite package
library(jsonlite) 

## Assign extracted API data to "rwjobs"
rwjobsraw1 <- fromJSON("http://api.reliefweb.int/v1/jobs?limit=1000&filter[field]=date.created&filter[value][from]=2016-05-24T00:00:00%2B00:00&filter[value][to]=2016-05-31T00:00:00%2B00:00&&fields[include][]title&fields[include][]=body&fields[include][]=theme&fields[include][]=country&fields[include][]=type&fields[include][]=experience&fields[include][]=career_categories")

## Assign data set to "rwjobs1" and review column names
rwjobs1 <- rwjobsraw1$data$fields
colnames(rwjobs1)

## View data set
View(rwjobs1)

## Load plyr package
library(plyr)

## Unlist nested lists
rwjobs1$theme <- llply(rwjobs1$theme, unlist)
rwjobs1$type <- llply(rwjobs1$type, unlist)
rwjobs1$experience <- llply(rwjobs1$experience, unlist)
rwjobs1$career_categories <- llply(rwjobs1$career_categories, unlist)
rwjobs1$country <- llply(rwjobs1$country, unlist)

## Clean dataset by removing unneccesary characters and splitting strings 
rwjobs1$type <- gsub("\\c\\(", "", rwjobs1$type)
rwjobs1$type <- gsub("\"", "", rwjobs1$type)
rwjobs1$type <- gsub("\\)", "", rwjobs1$type)
rwjobs1$type <- as.character(rwjobs1$type)
type_split <- strsplit(rwjobs1$type, split = ",")
select_el <- function(x, index) {x[index]}
type_id <- lapply(type_split, select_el, index = 1) 
type_name <- lapply(type_split, select_el, index = 2) 
rwjobs1$type_id <- as.character(type_id)
rwjobs1$type_name <- as.character(type_name)
rwjobs1$type <- NULL

rwjobs1$career_categories <- gsub("\\c\\(", "", rwjobs1$career_categories)
rwjobs1$career_categories <- gsub("\"", "", rwjobs1$career_categories)
rwjobs1$career_categories <- gsub("\\)", "", rwjobs1$career_categories)
rwjobs1$career_categories <- as.character(rwjobs1$career_categories)
career_categories_split <- strsplit(rwjobs1$career_categories, split = ",")
select_el <- function(x, index) {x[index]}
career_categories_id <- lapply(career_categories_split, select_el, index = 1) 
career_categories_name <- lapply(career_categories_split, select_el, index = 2) 
rwjobs1$career_categories_id <- as.character(career_categories_id)
rwjobs1$career_categories_name <- as.character(career_categories_name)
rwjobs1$career_categories <- NULL

rwjobs1$theme <- gsub("\\c\\(", "", rwjobs1$theme)
rwjobs1$theme <- gsub("\"", "", rwjobs1$theme)
rwjobs1$theme <- gsub("\\)", "", rwjobs1$theme)
rwjobs1$theme <- as.character(rwjobs1$theme)
theme_split <- strsplit(rwjobs1$theme, split = ",")
select_el <- function(x, index) {x[index]}
theme_id <- lapply(theme_split, select_el, index = 1) 
theme_name <- lapply(theme_split, select_el, index = 2) 
rwjobs1$theme_id <- as.character(theme_id)
rwjobs1$theme_name <- as.character(theme_name)
rwjobs1$theme <- NULL

rwjobs1$experience <- gsub("\\c\\(", "", rwjobs1$experience)
rwjobs1$experience <- gsub("\"", "", rwjobs1$experience)
rwjobs1$experience <- gsub("\\years\\)", "", rwjobs1$experience)
rwjobs1$experience <- as.character(rwjobs1$experience)
experience_split <- strsplit(rwjobs1$experience, split = ",")
select_el <- function(x, index) {x[index]}
experience_id <- lapply(experience_split, select_el, index = 1) 
experience_years <- lapply(experience_split, select_el, index = 2) 
rwjobs1$experience_id <- as.character(experience_id)
rwjobs1$experience_years <- as.character(experience_years)
rwjobs1$experience_id <- NULL
rwjobs1$experience <- NULL

rwjobs1$country <- gsub("\\c\\(", "", rwjobs1$country)
rwjobs1$country <- gsub("\"", "", rwjobs1$country)
rwjobs1$country <- gsub("\\)", "", rwjobs1$country)
rwjobs1$country <- as.character(rwjobs1$country)
country_split <- strsplit(rwjobs1$country, split = ",")
select_el <- function(x, index) {x[index]}
country_href <- lapply(country_split, select_el, index = 1) 
country_id <- lapply(country_split, select_el, index = 2) 
country_location1 <- lapply(country_split, select_el, index = 3) 
country_location2 <- lapply(country_split, select_el, index = 4) 
country_name <- lapply(country_split, select_el, index = 5) 
country_iso <- lapply(country_split, select_el, index = 6)
country_sn <- lapply(country_split, select_el, index = 7)
rwjobs1$country_id <- as.character(country_id)
rwjobs1$country_name <- as.character(country_name)
rwjobs1$country <- NULL 

## Save dataset into a csv file, amending the csv file name depending on the batch of data extracted
write.csv(rwjobs1, "rwjobs5.csv")

## Combine cleaned dataset
rwjobs1 <- read.csv("C:/Users/elizajv/Documents/rwjobs1.csv", 1)
rwjobs2 <- read.csv("C:/Users/elizajv/Documents/rwjobs2.csv", 1)
rwjobs3 <- read.csv("C:/Users/elizajv/Documents/rwjobs3.csv", 1)
rwjobsall <- rbind(rwjobs1, rwjobs2, rwjobs3)

## View combined dataset
View(rwjobsall)

## Remove unnecessary column
rwjobsall$X <- NULL

## Create columns for languages

## Load stringr package
library(stringr)

## Create columns based on language keywords in the "body" and "country_name" columns
rwjobsall$English <- str_match(rwjobsall$body, "English") ## when the "body" column mentions "French" 
rwjobsall$English <- ifelse(rwjobsall$English=="English", 1, 0)

rwjobsall$English2 <- str_match(rwjobsall$country_name, "United States of America") ## when the "country" column mentions "United States of America" where English is an official language
rwjobsall$English2 <- ifelse(rwjobsall$English2=="United States of America", 1, 0) 

rwjobsall$English3 <- str_match(rwjobsall$country_name, "United Kingdom") ## when the "country" column mentions "United Kingdom" where English is an official language
rwjobsall$English3 <- ifelse(rwjobsall$English3=="United Kingdom", 1, 0)

rwjobsall$English4 <- str_match(rwjobsall$country_name, "Ireland") ## when the "country" column mentions "Ireland" where English is an official language
rwjobsall$English4 <- ifelse(rwjobsall$English4=="Ireland", 1, 0)

rwjobsall$English5 <- str_match(rwjobsall$country_name, "Philippines") ## when the "country" column mentions "Philippines" where English is commonly used for communication and preparing reports
rwjobsall$English5 <- ifelse(rwjobsall$English5=="Philippines", 1, 0)

rwjobsall$English6 <- str_match(rwjobsall$country_name, "Canada") ## when the "country" column mentions "Canada" where English is an official language
rwjobsall$English6 <- ifelse(rwjobsall$English6=="Canada", 1, 0)

rwjobsall$English7 <- str_match(rwjobsall$country_name, "Australia") ## when the "country" column mentions "Australia" where English is an official language
rwjobsall$English7 <- ifelse(rwjobsall$English7=="Australia", 1, 0)

rwjobsall$English8 <- str_match(rwjobsall$country_name, "Nigeria") ## when the "country" column mentions "Nigeria" where English is an official language
rwjobsall$English8 <- ifelse(rwjobsall$English8=="Nigeria", 1, 0)

rwjobsall$English9 <- str_match(rwjobsall$country_name, "Liberia") ## when the "country" column mentions "Liberia" where English is an official language
rwjobsall$English9 <- ifelse(rwjobsall$English9=="Liberia", 1, 0)

rwjobsall$English10 <- str_match(rwjobsall$country_name, "Ghana") ## when the "country" column mentions "Ghana" where English is an official language
rwjobsall$English10 <- ifelse(rwjobsall$English10=="Ghana", 1, 0)

rwjobsall$English11 <- str_match(rwjobsall$country_name, "Gambia") ## when the "country" column mentions "Gambia" where English is an official language
rwjobsall$English11 <- ifelse(rwjobsall$English11=="Gambia", 1, 0)

rwjobsall$English12 <- str_match(rwjobsall$country_name, "Rwanda") ## when the "country" column mentions "Rwanda" where English is an official language
rwjobsall$English12 <- ifelse(rwjobsall$English12=="Rwanda", 1, 0)

rwjobsall$English13 <- str_match(rwjobsall$country_name, "Zambia") ## when the "country" column mentions "Zambia" where English is an official language
rwjobsall$English13 <- ifelse(rwjobsall$English13=="Zambia", 1, 0)

rwjobsall$English14 <- str_match(rwjobsall$country_name, "Uganda") ## when the "country" column mentions "Uganda" where English is an official language
rwjobsall$English14 <- ifelse(rwjobsall$English14=="Uganda", 1, 0)

rwjobsall$English15 <- str_match(rwjobsall$country_name, "Kenya") ## when the "country" column mentions "Kenya" where English is an official language
rwjobsall$English15 <- ifelse(rwjobsall$English15=="Kenya", 1, 0)

rwjobsall$English16 <- str_match(rwjobsall$country_name, "Malawi") ## when the "country" column mentions "Malawi" where English is an official language
rwjobsall$English16 <- ifelse(rwjobsall$English16=="Malawi", 1, 0)

rwjobsall$English17 <- str_match(rwjobsall$country_name, "Sierra Leone") ## when the "country" column mentions "Sierra Leone" where English is an official language
rwjobsall$English17 <- ifelse(rwjobsall$English17=="Sierra Leone", 1, 0)

rwjobsall$English18 <- str_match(rwjobsall$country_name, "South Africa") ## when the "country" column mentions "South Africa" where English is an official language
rwjobsall$English18 <- ifelse(rwjobsall$English18=="South Africa", 1, 0)

rwjobsall$English19 <- str_match(rwjobsall$country_name, "Pakistan") ## when the "country" column mentions "Pakistan" where English is an official language
rwjobsall$English19 <- ifelse(rwjobsall$English19=="Pakistan", 1, 0)

rwjobsall$English20 <- str_match(rwjobsall$country_name, "India") ## when the "country" column mentions "India" where English is a commonly used language and the job ad is written in English
rwjobsall$English20 <- ifelse(rwjobsall$English20=="India", 1, 0)

rwjobsall$English21 <- c(NA * 1891) ## a column with NA values that will be replaced by "1" if the remaining job ads (following filtering and if don't have any language associated with them) are written in English  

rwjobsall$French <- str_match(rwjobsall$body, "French") ## when the "body" column mentions "French" 
rwjobsall$French <- ifelse(rwjobsall$French=="French", 1, 0)

rwjobsall$French2 <- str_match(rwjobsall$body, "pour") ## when the "body" column mentions "pour" which is a common French conjunction/term 
rwjobsall$French2 <- ifelse(rwjobsall$French2=="pour", 1, 0)

rwjobsall$French3 <- str_match(rwjobsall$country_name, "France") ## when the "country" column mentions "France" where French is an official language
rwjobsall$French3 <- ifelse(rwjobsall$French3=="France", 1, 0)

rwjobsall$French4 <- str_match(rwjobsall$country_name, "Chad") ## when the "country" column mentions "Chad" where English is an official language
rwjobsall$French4 <- ifelse(rwjobsall$French4=="Chad", 1, 0)

rwjobsall$French5 <- str_match(rwjobsall$country_name, "Democratic Republic of the Congo") ## when the "country" column mentions "Democratic Republic of the Congo" where English is an official language
rwjobsall$French5 <- ifelse(rwjobsall$French5=="Democratic Republic of the Congo", 1, 0)

rwjobsall$French6 <- c(NA * 1891) ## a column with NA values that will be replaced by "1" if the remaining job ads (following filtering and if don't have any language associated with them) are written in French

rwjobsall$Arabic <- str_match(rwjobsall$body, "Arabic") ## when the "body" column mentions "Arabic" 
rwjobsall$Arabic <- ifelse(rwjobsall$Arabic=="Arabic", 1, 0)

rwjobsall$Spanish <- str_match(rwjobsall$body, "Spanish") ## when the "body" column mentions "Spanish" 
rwjobsall$Spanish <- ifelse(rwjobsall$Spanish=="Spanish", 1, 0)

rwjobsall$Spanish2 <- str_match(rwjobsall$country_name, "Spain") ## when the "country" column mentions "Spain" where Spanish is an official language
rwjobsall$Spanish2 <- ifelse(rwjobsall$Spanish2=="Spain", 1, 0)

rwjobsall$Spanish3 <- str_match(rwjobsall$body, "es una") ## when the "body" column mentions "es una" which is a common Spanish phrase 
rwjobsall$Spanish3 <- ifelse(rwjobsall$Spanish3=="es una", 1, 0)

rwjobsall$Spanish4 <- str_match(rwjobsall$country_name, "Ecuador") ## when the "country" column mentions "Ecuador" where Spanish is an official language
rwjobsall$Spanish4 <- ifelse(rwjobsall$Spanish4=="Ecuador", 1, 0)

rwjobsall$Spanish5 <- str_match(rwjobsall$country_name, "Guatemala") ## when the "country" column mentions "Guatemala" where Spanish is an official language
rwjobsall$Spanish5 <- ifelse(rwjobsall$Spanish5=="Guatemala", 1, 0)

rwjobsall$Spanish6 <- c(NA * 1891) ## a column with NA values that will be replaced by "1" if the remaining job ads (following filtering and if don't have any language associated with them) are written in Spanish

rwjobsall$Italian <- str_match(rwjobsall$body, "Italian") ## when the "body" column mentions "Italian" 
rwjobsall$Italian <- ifelse(rwjobsall$Italian=="Italian", 1, 0)

rwjobsall$Italian2 <- str_match(rwjobsall$country_name, "Italy") ## when the "country" column mentions "Italy" where Italian is an official language
rwjobsall$Italian2 <- ifelse(rwjobsall$Italian2=="Italy", 1, 0)

rwjobsall$local <- str_match(rwjobsall$body, "local language") ## when the "body" column mentions "local language" 
rwjobsall$local <- ifelse(rwjobsall$local=="local language", 1, 0)

rwjobsall$local2 <- str_match(rwjobsall$body, "nationals") ## when the "body" column mentions "nationals" which suggests that the person to be hired will speak in the local language 
rwjobsall$local2 <- ifelse(rwjobsall$local2=="nationals", 1, 0)

rwjobsall$local3 <- str_match(rwjobsall$body, "Swahili") ## when the "body" column mentions "Swahili" which is a local language in Africa 
rwjobsall$local3 <- ifelse(rwjobsall$local3=="Swahili", 1, 0)

rwjobsall$Russian <- str_match(rwjobsall$body, "Russian") ## when the "body" column mentions "Russian"  
rwjobsall$Russian <- ifelse(rwjobsall$Russian=="Russian", 1, 0)

rwjobsall$Portuguese <- str_match(rwjobsall$body, "Portuguese") ## when the "body" column mentions "Portuguese"
rwjobsall$Portuguese <- ifelse(rwjobsall$Portuguese=="Portuguese", 1, 0)

rwjobsall$Portuguese2 <- str_match(rwjobsall$country_name, "Angola") ## when the "country" column mentions "Angol" where Portuguese is an official language
rwjobsall$Portuguese2 <- ifelse(rwjobsall$Portuguese2=="Angola", 1, 0)


## Save combined dataset
write.csv(rwjobsall, "rwjobsall.csv")

## Clean dataset in Excel by assigning NA values to duplicate values, for instance in case English and and English2 columns have the same values of "1")

## Open combined dataset in csv file 

rwjobsall <- read.csv("C:/Users/elizajv/Documents/rwjobsall.csv", 1)

## View dataset
View(rwjobsall)

## Remove unnecessary column
rwjobsall$X <- NULL

## Determine language frequencies

total_English <- sum(rwjobsall$English, rwjobsall$English2, rwjobsall$English3, rwjobsall$English4, rwjobsall$English5, rwjobsall$English6, rwjobsall$English7, rwjobsall$English8, rwjobsall$English9, rwjobsall$English10, rwjobsall$English11, rwjobsall$English12, rwjobsall$English13, rwjobsall$English14, rwjobsall$English15, rwjobsall$English16, rwjobsall$English17, rwjobsall$English18, rwjobsall$English19, rwjobsall$English20, rwjobsall$English21, na.rm = TRUE)
English_percentage <- total_English / total_language

total_French <- sum(rwjobsall$French, rwjobsall$French2, rwjobsall$French3, rwjobsall$French4, rwjobsall$French5, rwjobsall$French6, na.rm = TRUE)
French_percentage <- total_French / total_language

total_Spanish <- sum(rwjobsall$Spanish, rwjobsall$Spanish2, rwjobsall$Spanish3, rwjobsall$Spanish4, rwjobsall$Spanish5, rwjobsall$Spanish6, na.rm = TRUE)
Spanish_percentage <- total_Spanish / total_language

total_Italian <- sum(rwjobsall$Italian, rwjobsall$Italian2, na.rm = TRUE)
Italian_percentage <- total_Italian / total_language

total_Arabic <- sum(rwjobsall$Arabic, na.rm = TRUE)
Arabic_percentage <- total_Arabic / total_language

total_Russian <- sum(rwjobsall$Russian, na.rm = TRUE)
Russian_percentage <- total_Russian / total_language

total_Portuguese <- sum(rwjobsall$Portuguese, rwjobsall$Portuguese2, na.rm = TRUE)
Portuguese_percentage <- total_Portuguese / total_language

total_local <- sum(rwjobsall$local, rwjobsall$local2, rwjobsall$local3, na.rm = TRUE)
local_percentage <- total_local / total_language

total_language <- sum(total_French, total_English, total_Spanish, total_Italian, total_Arabic, total_local, total_Russian, total_Portuguese)
